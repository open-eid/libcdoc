<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libcdoc: libcdoc::CDocReader Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">libcdoc<span id="projectnumber">&#160;0.1.8</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classlibcdoc_1_1CDocReader.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classlibcdoc_1_1CDocReader-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">libcdoc::CDocReader Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Provides decryption interface.  
 <a href="classlibcdoc_1_1CDocReader.html#details">More...</a></p>

<p><code>#include &lt;CDocReader.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a123dfb6849f54a58ded2a253ab0343e9" id="r_a123dfb6849f54a58ded2a253ab0343e9"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a123dfb6849f54a58ded2a253ab0343e9">~CDocReader</a> () noexcept=default</td></tr>
<tr class="separator:a123dfb6849f54a58ded2a253ab0343e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6b03ff9883708fd3bbf28455828612c" id="r_ab6b03ff9883708fd3bbf28455828612c"><td class="memItemLeft" align="right" valign="top">virtual const std::vector&lt; <a class="el" href="structlibcdoc_1_1Lock.html">Lock</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#ab6b03ff9883708fd3bbf28455828612c">getLocks</a> ()=0</td></tr>
<tr class="memdesc:ab6b03ff9883708fd3bbf28455828612c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get decryption locks in given document.  <br /></td></tr>
<tr class="separator:ab6b03ff9883708fd3bbf28455828612c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e230d8d357813cd12e189ddf4e84d2b" id="r_a4e230d8d357813cd12e189ddf4e84d2b"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a4e230d8d357813cd12e189ddf4e84d2b">getLockForCert</a> (const std::vector&lt; uint8_t &gt; &amp;cert)=0</td></tr>
<tr class="memdesc:a4e230d8d357813cd12e189ddf4e84d2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds the lock index for given certificate.  <br /></td></tr>
<tr class="separator:a4e230d8d357813cd12e189ddf4e84d2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c861c3a129ce64ecb6c14bd8dd4546" id="r_a63c861c3a129ce64ecb6c14bd8dd4546"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a63c861c3a129ce64ecb6c14bd8dd4546">getFMK</a> (std::vector&lt; uint8_t &gt; &amp;fmk, unsigned int lock_idx)=0</td></tr>
<tr class="memdesc:a63c861c3a129ce64ecb6c14bd8dd4546"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain FMK of given lock.  <br /></td></tr>
<tr class="separator:a63c861c3a129ce64ecb6c14bd8dd4546"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac634b62ae11d5d326e137fa50bbe79a" id="r_aac634b62ae11d5d326e137fa50bbe79a"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#aac634b62ae11d5d326e137fa50bbe79a">beginDecryption</a> (const std::vector&lt; uint8_t &gt; &amp;fmk)=0</td></tr>
<tr class="memdesc:aac634b62ae11d5d326e137fa50bbe79a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start decrypting container.  <br /></td></tr>
<tr class="separator:aac634b62ae11d5d326e137fa50bbe79a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa7468b7469fe5908cba4d9f37802d21" id="r_aaa7468b7469fe5908cba4d9f37802d21"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#aaa7468b7469fe5908cba4d9f37802d21">nextFile</a> (std::string &amp;name, int64_t &amp;size)=0</td></tr>
<tr class="memdesc:aaa7468b7469fe5908cba4d9f37802d21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Go to the next file in container.  <br /></td></tr>
<tr class="separator:aaa7468b7469fe5908cba4d9f37802d21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d3dde2e19925d43623de634d9ad18ae" id="r_a4d3dde2e19925d43623de634d9ad18ae"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a4d3dde2e19925d43623de634d9ad18ae">readData</a> (uint8_t *dst, size_t size)=0</td></tr>
<tr class="memdesc:a4d3dde2e19925d43623de634d9ad18ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read data from the current file.  <br /></td></tr>
<tr class="separator:a4d3dde2e19925d43623de634d9ad18ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44faac9b806cc9ffad553db20b564424" id="r_a44faac9b806cc9ffad553db20b564424"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a44faac9b806cc9ffad553db20b564424">finishDecryption</a> ()=0</td></tr>
<tr class="memdesc:a44faac9b806cc9ffad553db20b564424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish decrypting container.  <br /></td></tr>
<tr class="separator:a44faac9b806cc9ffad553db20b564424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad412492547c2102bbe7c6b8d941531d7" id="r_ad412492547c2102bbe7c6b8d941531d7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#ad412492547c2102bbe7c6b8d941531d7">nextFile</a> (<a class="el" href="structlibcdoc_1_1FileInfo.html">FileInfo</a> &amp;info)</td></tr>
<tr class="memdesc:ad412492547c2102bbe7c6b8d941531d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Go to the next file in container.  <br /></td></tr>
<tr class="separator:ad412492547c2102bbe7c6b8d941531d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a346460adbe31c1d07ae6f40bf81bb990" id="r_a346460adbe31c1d07ae6f40bf81bb990"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a346460adbe31c1d07ae6f40bf81bb990">decrypt</a> (const std::vector&lt; uint8_t &gt; &amp;fmk, <a class="el" href="structlibcdoc_1_1MultiDataConsumer.html">MultiDataConsumer</a> *consumer)=0</td></tr>
<tr class="memdesc:a346460adbe31c1d07ae6f40bf81bb990"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrypt document in one step.  <br /></td></tr>
<tr class="separator:a346460adbe31c1d07ae6f40bf81bb990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68d409d05986c5fffbe4654cdaba953" id="r_af68d409d05986c5fffbe4654cdaba953"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#af68d409d05986c5fffbe4654cdaba953">getLastErrorStr</a> () const</td></tr>
<tr class="memdesc:af68d409d05986c5fffbe4654cdaba953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the error text of the last failed operation.  <br /></td></tr>
<tr class="separator:af68d409d05986c5fffbe4654cdaba953"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a420c233189c1ac2ca04bc6704f0a0b29" id="r_a420c233189c1ac2ca04bc6704f0a0b29"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a420c233189c1ac2ca04bc6704f0a0b29">getCDocFileVersion</a> (const std::string &amp;path)</td></tr>
<tr class="memdesc:a420c233189c1ac2ca04bc6704f0a0b29"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to determine the cdoc file version.  <br /></td></tr>
<tr class="separator:a420c233189c1ac2ca04bc6704f0a0b29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c3558605e7c17da347a61950a3c78ab" id="r_a7c3558605e7c17da347a61950a3c78ab"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a7c3558605e7c17da347a61950a3c78ab">getCDocFileVersion</a> (<a class="el" href="structlibcdoc_1_1DataSource.html">DataSource</a> *src)</td></tr>
<tr class="memdesc:a7c3558605e7c17da347a61950a3c78ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to determine the cdoc file version.  <br /></td></tr>
<tr class="separator:a7c3558605e7c17da347a61950a3c78ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbf03787c303900aa6f40a536af60e64" id="r_afbf03787c303900aa6f40a536af60e64"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#afbf03787c303900aa6f40a536af60e64">createReader</a> (<a class="el" href="structlibcdoc_1_1DataSource.html">DataSource</a> *src, bool take_ownership, <a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#a4d20478fec42c4dc50f9856b5bbfbe07">conf</a>, <a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#a3a93688226a831e3e1123720de64e0c3">crypto</a>, <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#ae4c9cfe2f9d72ae11bed6c37991bf408">network</a>)</td></tr>
<tr class="memdesc:afbf03787c303900aa6f40a536af60e64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create CDoc document reader.  <br /></td></tr>
<tr class="separator:afbf03787c303900aa6f40a536af60e64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a734ee3ae24ac619e9f1bf7e21cb88025" id="r_a734ee3ae24ac619e9f1bf7e21cb88025"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a734ee3ae24ac619e9f1bf7e21cb88025">createReader</a> (const std::string &amp;path, <a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#a4d20478fec42c4dc50f9856b5bbfbe07">conf</a>, <a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#a3a93688226a831e3e1123720de64e0c3">crypto</a>, <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#ae4c9cfe2f9d72ae11bed6c37991bf408">network</a>)</td></tr>
<tr class="memdesc:a734ee3ae24ac619e9f1bf7e21cb88025"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create CDoc document reader.  <br /></td></tr>
<tr class="separator:a734ee3ae24ac619e9f1bf7e21cb88025"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c900b3fc05b77cbb89aa83270ff5da" id="r_aa1c900b3fc05b77cbb89aa83270ff5da"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#aa1c900b3fc05b77cbb89aa83270ff5da">createReader</a> (std::istream &amp;ifs, <a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#a4d20478fec42c4dc50f9856b5bbfbe07">conf</a>, <a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#a3a93688226a831e3e1123720de64e0c3">crypto</a>, <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *<a class="el" href="classlibcdoc_1_1CDocReader.html#ae4c9cfe2f9d72ae11bed6c37991bf408">network</a>)</td></tr>
<tr class="memdesc:aa1c900b3fc05b77cbb89aa83270ff5da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create CDoc document reader.  <br /></td></tr>
<tr class="separator:aa1c900b3fc05b77cbb89aa83270ff5da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af1cee86c040a2e0aaadd3bc8b705c872" id="r_af1cee86c040a2e0aaadd3bc8b705c872"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#af1cee86c040a2e0aaadd3bc8b705c872">version</a></td></tr>
<tr class="memdesc:af1cee86c040a2e0aaadd3bc8b705c872"><td class="mdescLeft">&#160;</td><td class="mdescRight">The container version (1 or 2)  <br /></td></tr>
<tr class="separator:af1cee86c040a2e0aaadd3bc8b705c872"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a0cb12d9d951ca868bc4106f04dc82e79" id="r_a0cb12d9d951ca868bc4106f04dc82e79"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a0cb12d9d951ca868bc4106f04dc82e79">CDocReader</a> (int _version)</td></tr>
<tr class="separator:a0cb12d9d951ca868bc4106f04dc82e79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a980926719fff87c279334297fd94d471" id="r_a980926719fff87c279334297fd94d471"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a980926719fff87c279334297fd94d471">setLastError</a> (const std::string &amp;message)</td></tr>
<tr class="separator:a980926719fff87c279334297fd94d471"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a2723dc3357def941b88ebb9414af55b0" id="r_a2723dc3357def941b88ebb9414af55b0"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a2723dc3357def941b88ebb9414af55b0">last_error</a></td></tr>
<tr class="separator:a2723dc3357def941b88ebb9414af55b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d20478fec42c4dc50f9856b5bbfbe07" id="r_a4d20478fec42c4dc50f9856b5bbfbe07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a4d20478fec42c4dc50f9856b5bbfbe07">conf</a> = nullptr</td></tr>
<tr class="separator:a4d20478fec42c4dc50f9856b5bbfbe07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a93688226a831e3e1123720de64e0c3" id="r_a3a93688226a831e3e1123720de64e0c3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#a3a93688226a831e3e1123720de64e0c3">crypto</a> = nullptr</td></tr>
<tr class="separator:a3a93688226a831e3e1123720de64e0c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4c9cfe2f9d72ae11bed6c37991bf408" id="r_ae4c9cfe2f9d72ae11bed6c37991bf408"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlibcdoc_1_1CDocReader.html#ae4c9cfe2f9d72ae11bed6c37991bf408">network</a> = nullptr</td></tr>
<tr class="separator:ae4c9cfe2f9d72ae11bed6c37991bf408"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides decryption interface. </p>
<p>An abstract base class of CDoc1 and CDoc2 readers. Provides unified interface for loading and decryption of containers. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a123dfb6849f54a58ded2a253ab0343e9" name="a123dfb6849f54a58ded2a253ab0343e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a123dfb6849f54a58ded2a253ab0343e9">&#9670;&#160;</a></span>~CDocReader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual libcdoc::CDocReader::~CDocReader </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span><span class="mlabel">noexcept</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0cb12d9d951ca868bc4106f04dc82e79" name="a0cb12d9d951ca868bc4106f04dc82e79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cb12d9d951ca868bc4106f04dc82e79">&#9670;&#160;</a></span>CDocReader()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">libcdoc::CDocReader::CDocReader </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>_version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aac634b62ae11d5d326e137fa50bbe79a" name="aac634b62ae11d5d326e137fa50bbe79a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac634b62ae11d5d326e137fa50bbe79a">&#9670;&#160;</a></span>beginDecryption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::beginDecryption </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>fmk</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Start decrypting container. </p>
<p>Starts decryption of the container. This may involve parsing and decrypting headers, checking file and key integrity etc. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmk</td><td>File Master Key of the document </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code or OK </dd></dl>

</div>
</div>
<a id="a734ee3ae24ac619e9f1bf7e21cb88025" name="a734ee3ae24ac619e9f1bf7e21cb88025"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a734ee3ae24ac619e9f1bf7e21cb88025">&#9670;&#160;</a></span>createReader() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a> * libcdoc::CDocReader::createReader </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *&#160;</td>
          <td class="paramname"><em>crypto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *&#160;</td>
          <td class="paramname"><em>network</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create CDoc document reader. </p>
<p>Creates a new document reader if file is a valid CDoc container (either version 1 or 2) <a class="el" href="structlibcdoc_1_1Configuration.html" title="A configuration provider.">Configuration</a> and <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> may be null if keyservers are not used. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the path to file </td></tr>
    <tr><td class="paramname">conf</td><td>a configuration object </td></tr>
    <tr><td class="paramname">crypto</td><td>a cryptographic backend implementation </td></tr>
    <tr><td class="paramname">network</td><td>a network backend implementation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new <a class="el" href="classlibcdoc_1_1CDocReader.html" title="Provides decryption interface.">CDocReader</a> or null </dd></dl>

</div>
</div>
<a id="afbf03787c303900aa6f40a536af60e64" name="afbf03787c303900aa6f40a536af60e64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbf03787c303900aa6f40a536af60e64">&#9670;&#160;</a></span>createReader() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a> * libcdoc::CDocReader::createReader </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1DataSource.html">DataSource</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>take_ownership</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *&#160;</td>
          <td class="paramname"><em>crypto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *&#160;</td>
          <td class="paramname"><em>network</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create CDoc document reader. </p>
<p>Creates a new document reader if source is a valid CDoc container (either version 1 or 2). <a class="el" href="structlibcdoc_1_1Configuration.html" title="A configuration provider.">Configuration</a> and <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> may be null if keyservers are not used. If take_ownership is true, the source is deleted by the reader destructor. If src is not a valid CDoc file, the source is deleted before returning null. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the container source </td></tr>
    <tr><td class="paramname">take_ownership</td><td>if true the source is deleted in reader destructor </td></tr>
    <tr><td class="paramname">conf</td><td>a configuration object </td></tr>
    <tr><td class="paramname">crypto</td><td>a cryptographic backend implementation </td></tr>
    <tr><td class="paramname">network</td><td>a network backend implementation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new <a class="el" href="classlibcdoc_1_1CDocReader.html" title="Provides decryption interface.">CDocReader</a> or null </dd></dl>

</div>
</div>
<a id="aa1c900b3fc05b77cbb89aa83270ff5da" name="aa1c900b3fc05b77cbb89aa83270ff5da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c900b3fc05b77cbb89aa83270ff5da">&#9670;&#160;</a></span>createReader() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a> * libcdoc::CDocReader::createReader </td>
          <td>(</td>
          <td class="paramtype">std::istream &amp;&#160;</td>
          <td class="paramname"><em>ifs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a> *&#160;</td>
          <td class="paramname"><em>conf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a> *&#160;</td>
          <td class="paramname"><em>crypto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> *&#160;</td>
          <td class="paramname"><em>network</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create CDoc document reader. </p>
<p>Creates a new document reader if inputstream is a valid CDoc container (either version 1 or 2) <a class="el" href="structlibcdoc_1_1Configuration.html" title="A configuration provider.">Configuration</a> and <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> may be null if keyservers are not used. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ifs</td><td>the input stream </td></tr>
    <tr><td class="paramname">conf</td><td>a configuration object </td></tr>
    <tr><td class="paramname">crypto</td><td>a cryptographic backend implementation </td></tr>
    <tr><td class="paramname">network</td><td>a network backend implementation </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a new <a class="el" href="classlibcdoc_1_1CDocReader.html" title="Provides decryption interface.">CDocReader</a> or null </dd></dl>

</div>
</div>
<a id="a346460adbe31c1d07ae6f40bf81bb990" name="a346460adbe31c1d07ae6f40bf81bb990"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a346460adbe31c1d07ae6f40bf81bb990">&#9670;&#160;</a></span>decrypt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::decrypt </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>fmk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1MultiDataConsumer.html">MultiDataConsumer</a> *&#160;</td>
          <td class="paramname"><em>consumer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decrypt document in one step. </p>
<p>Decrypts the encrypted content and writes files to provided output object. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmk</td><td>The FMK of the document </td></tr>
    <tr><td class="paramname">consumer</td><td>a consumer of decrypted files </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code or OK </dd></dl>

</div>
</div>
<a id="a44faac9b806cc9ffad553db20b564424" name="a44faac9b806cc9ffad553db20b564424"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44faac9b806cc9ffad553db20b564424">&#9670;&#160;</a></span>finishDecryption()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::finishDecryption </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finish decrypting container. </p>
<p>Finishes the decryption of the container. This may onvolve releasing buffers, closing hardware keys etc. </p><dl class="section return"><dt>Returns</dt><dd>error code or OK </dd></dl>

</div>
</div>
<a id="a420c233189c1ac2ca04bc6704f0a0b29" name="a420c233189c1ac2ca04bc6704f0a0b29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a420c233189c1ac2ca04bc6704f0a0b29">&#9670;&#160;</a></span>getCDocFileVersion() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int libcdoc::CDocReader::getCDocFileVersion </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to determine the cdoc file version. </p>
<p>Tries to open the file and find CDoc format descriptors inside it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>a path to file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>version or error code if not a readable CDoc file </dd></dl>

</div>
</div>
<a id="a7c3558605e7c17da347a61950a3c78ab" name="a7c3558605e7c17da347a61950a3c78ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c3558605e7c17da347a61950a3c78ab">&#9670;&#160;</a></span>getCDocFileVersion() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int libcdoc::CDocReader::getCDocFileVersion </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1DataSource.html">DataSource</a> *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to determine the cdoc file version. </p>
<p>Tries to read the source and find CDoc format descriptors inside it. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>the container source </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>version or error code if not a readable CDoc file </dd></dl>

</div>
</div>
<a id="a63c861c3a129ce64ecb6c14bd8dd4546" name="a63c861c3a129ce64ecb6c14bd8dd4546"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63c861c3a129ce64ecb6c14bd8dd4546">&#9670;&#160;</a></span>getFMK()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::getFMK </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>fmk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>lock_idx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Obtain FMK of given lock. </p>
<p>Obtains FMK (File Master Key) of the lock with given index. Depending on the lock type it uses a relevant <a class="el" href="structlibcdoc_1_1CryptoBackend.html" title="An authentication provider.">CryptoBackend</a> and/or <a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a> methods to either fetch secret and derive key or perform external decryption of encrypted KEK. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmk</td><td>The FMK of the document </td></tr>
    <tr><td class="paramname">lock_idx</td><td>the index of a lock (in the document lock list) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code or OK </dd></dl>

</div>
</div>
<a id="af68d409d05986c5fffbe4654cdaba953" name="af68d409d05986c5fffbe4654cdaba953"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af68d409d05986c5fffbe4654cdaba953">&#9670;&#160;</a></span>getLastErrorStr()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string libcdoc::CDocReader::getLastErrorStr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the error text of the last failed operation. </p>
<p>Get the error message of the last failed operation. It should be called immediately after getting error code as certain methods may reset the error. </p><dl class="section return"><dt>Returns</dt><dd>error description, empty string if no errors </dd></dl>

</div>
</div>
<a id="a4e230d8d357813cd12e189ddf4e84d2b" name="a4e230d8d357813cd12e189ddf4e84d2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e230d8d357813cd12e189ddf4e84d2b">&#9670;&#160;</a></span>getLockForCert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::getLockForCert </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; uint8_t &gt; &amp;&#160;</td>
          <td class="paramname"><em>cert</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Finds the lock index for given certificate. </p>
<p>Returns the first lock that can be opened by the private key of the certificate holder. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cert</td><td>a x509 certificate (der) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>lock index or error code </dd></dl>

</div>
</div>
<a id="ab6b03ff9883708fd3bbf28455828612c" name="ab6b03ff9883708fd3bbf28455828612c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6b03ff9883708fd3bbf28455828612c">&#9670;&#160;</a></span>getLocks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual const std::vector&lt; <a class="el" href="structlibcdoc_1_1Lock.html">Lock</a> &gt; &amp; libcdoc::CDocReader::getLocks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get decryption locks in given document. </p>
<dl class="section return"><dt>Returns</dt><dd>a vector of locks </dd></dl>

</div>
</div>
<a id="ad412492547c2102bbe7c6b8d941531d7" name="ad412492547c2102bbe7c6b8d941531d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad412492547c2102bbe7c6b8d941531d7">&#9670;&#160;</a></span>nextFile() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::nextFile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structlibcdoc_1_1FileInfo.html">FileInfo</a> &amp;&#160;</td>
          <td class="paramname"><em>info</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Go to the next file in container. </p>
<p>Begins decrypting the next file in container. On success the <a class="el" href="structlibcdoc_1_1FileInfo.html" title="A simple container of file name and size.">FileInfo</a> struct is filled and the method returns OK. If there are no more file in the document, END_OF_STREAM is returned. It is OK to call nextFile before reading the whole data from the previous one. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">info</td><td>a <a class="el" href="structlibcdoc_1_1FileInfo.html" title="A simple container of file name and size.">FileInfo</a> structure </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code, OK or END_OF_STREAM </dd></dl>

<p class="reference">References <a class="el" href="classlibcdoc_1_1CDocReader.html#ad412492547c2102bbe7c6b8d941531d7">nextFile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classlibcdoc_1_1CDocReader.html#ad412492547c2102bbe7c6b8d941531d7">nextFile()</a>.</p>

</div>
</div>
<a id="aaa7468b7469fe5908cba4d9f37802d21" name="aaa7468b7469fe5908cba4d9f37802d21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa7468b7469fe5908cba4d9f37802d21">&#9670;&#160;</a></span>nextFile() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::nextFile </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t &amp;&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Go to the next file in container. </p>
<p>Begins decrypting the next file in container. On success the file name and size are filled and the method returns OK. If there are no more file in the document, END_OF_STREAM is returned. It is OK to call nextFile before reading the whole data from the previous one. It has to be called always (even for single-file container) immediately after beginDecryption to get access to the first file. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>the name of the next file </td></tr>
    <tr><td class="paramname">size</td><td>the size of the next file </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>error code, OK or END_OF_STREAM </dd></dl>

</div>
</div>
<a id="a4d3dde2e19925d43623de634d9ad18ae" name="a4d3dde2e19925d43623de634d9ad18ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d3dde2e19925d43623de634d9ad18ae">&#9670;&#160;</a></span>readData()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacelibcdoc.html#ab2a2d417d9cadf604b2aaa8d9aaa9bd0">result_t</a> libcdoc::CDocReader::readData </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read data from the current file. </p>
<p>Read bytes from the current file (opened with nextFile) inside of the container into the buffer. The number of bytes read is always the requested number, unless end of file is reached or error occurs. Thus the end of file is marked by returning 0. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>destination byte buffer </td></tr>
    <tr><td class="paramname">size</td><td>the number of bytes to read </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of bytes actually read or error code </dd></dl>

</div>
</div>
<a id="a980926719fff87c279334297fd94d471" name="a980926719fff87c279334297fd94d471"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a980926719fff87c279334297fd94d471">&#9670;&#160;</a></span>setLastError()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void libcdoc::CDocReader::setLastError </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>message</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4d20478fec42c4dc50f9856b5bbfbe07" name="a4d20478fec42c4dc50f9856b5bbfbe07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d20478fec42c4dc50f9856b5bbfbe07">&#9670;&#160;</a></span>conf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlibcdoc_1_1Configuration.html">Configuration</a>* libcdoc::CDocReader::conf = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a3a93688226a831e3e1123720de64e0c3" name="a3a93688226a831e3e1123720de64e0c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a93688226a831e3e1123720de64e0c3">&#9670;&#160;</a></span>crypto</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlibcdoc_1_1CryptoBackend.html">CryptoBackend</a>* libcdoc::CDocReader::crypto = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a2723dc3357def941b88ebb9414af55b0" name="a2723dc3357def941b88ebb9414af55b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2723dc3357def941b88ebb9414af55b0">&#9670;&#160;</a></span>last_error</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string libcdoc::CDocReader::last_error</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae4c9cfe2f9d72ae11bed6c37991bf408" name="ae4c9cfe2f9d72ae11bed6c37991bf408"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4c9cfe2f9d72ae11bed6c37991bf408">&#9670;&#160;</a></span>network</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structlibcdoc_1_1NetworkBackend.html">NetworkBackend</a>* libcdoc::CDocReader::network = nullptr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="af1cee86c040a2e0aaadd3bc8b705c872" name="af1cee86c040a2e0aaadd3bc8b705c872"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1cee86c040a2e0aaadd3bc8b705c872">&#9670;&#160;</a></span>version</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int libcdoc::CDocReader::version</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The container version (1 or 2) </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><b>CDocReader.h</b></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacelibcdoc.html">libcdoc</a></li><li class="navelem"><a class="el" href="classlibcdoc_1_1CDocReader.html">CDocReader</a></li>
    <li class="footer">Generated on Tue Feb 17 2026 12:06:31 for libcdoc by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
